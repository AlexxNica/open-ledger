{% import "includes/license-logo.html" as license_logo %}
{% import "includes/lists.html" as lists %}
{% import "includes/favorite.html" as favorite %}

{% macro show(detail_url, image, request) -%}
<div class="grid-item image-result t-image-result" data-identifier="{{ image.identifier }}">
    <figure>
      <div class="figure-wrapper">
        <a href="{{ detail_url }}" class="t-detail-link">
          <img src="{{ image.thumbnail }}" />
        </a>
      </div>
      <figcaption>
        <p class="title">{{ image.title|truncate(50) }}
          {% if image.creator %} by
            {% if image.creator_url %}
              <a href="{{ image.creator_url }}">{{ image.creator }}</a>
            {% else %}
              {{ image.creator }}
            {% endif %}
          {% endif %}
          </p>

        <a href="{{ detail_url }}">

        <div class="figure-metadata">

          {{ license_logo.license(image.license) }}

          {% if image.identifier %}
            {{ lists.add(image.identifier, request, size="small") }}
            {{ favorite.add(image.identifier, request, size="small") }}
          {% endif %}

          {% if caller %}
           {{ caller() }}
          {% endif %}
        </div>
      </a>

      </figcaption>
    </figure>
  </a>
</div>
{%- endmacro %}
